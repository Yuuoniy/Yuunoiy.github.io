---
title: 区块链 | 区块链共识机制的介绍
date: 2018-10-08 14:51:19
tags:
---

<!-- more -->
## 比特币历史背景
### 密码朋克 cypherpunk
### B-money+POW -> bitcon
[Bitcoin: A Peer-to-Peer Electronic Cash System](https://bitcoin.org/bitcoin.pdf)
##比特币共识机制
###比特币身份确认
公钥 私钥 钱包地址，由随机生成私钥->公钥->地址，私钥->公钥不可逆，公钥->地址可逆
		
### UTXO交易模型
UTXO：每笔新的交易都要打破旧的储蓄罐，生成新的储蓄罐
基本形式：版本号+input:未花费交易的UTXO+ouput:支付地址及数量+锁定时间
安全性：所有交易记录可溯源

### 交易信息记录
分布式数据库：
- 每个比特币网络上的节点都存储一个完整的账本
- 每一段时间生成一个区块，区块里记录这这个时间段内的交易记录，区块与去看快间按时间安全紧密地连在一起


### 信任规则（共识机制）
- 双花攻击
=》
同等验证，保证所有节点存储相同的交易账单
- 多重身份攻击 sybil attack/女巫攻击
  多重身份意味着多重投票的权利
=》采取资源成本投票
### 工作量证明 POW
proof of work
记账权必须通过花费计算资源来获得，比如通过蛮力解决一个问题.
- 挖矿争夺记账权奖励
  - 记账利润：比特币奖励+交易手续费

#### 工作量
- 不容易完成
- 容易验证
- 工作过程公平
- 具有随机性：能力越强，只能保证率先完成
#### 区块链
按照时间顺序将数据区块以顺序相连的方式组合成的一种链式数据结构
区块链是一个分布式的无法篡改的账本数据库
无法篡改性有哈希的单向性保证

#### 哈希函数
将任意长度的信息转化为固定长度的无序字符串
##### 特点
1. 正向快速
2. 输入敏感
3. 逆向困难
4. 冲突避免
MD5 老式
SHA2 系列生成的hash值更长，SHA 256,SHA512 数字表示长度

##### merkle tree
哈希树，二叉树
最下面的叶节点包含存储数据或其哈希值。每个中间节点是它的两个子节点内容的哈希值。
底层数据的变动会传递到根节点
优点：降低数据的传输量和计算的复杂度。
#### 挖矿原理

过程：参与者综合上一个区块的hash值，+ 上一个区块生成之后的新的验证过的交易内容的 markle root值 + 随机数 nonce +时间。让新区块的hash值小于比特币网络中给定的数。这个数越小，计算出来就越难

SHA(Markle root+ 上一个区块的hash +时间+nonce) < 某个数
可能导致恶性竞争
系统会每隔 2016  个区块，根据上一周期的挖矿频率，调整难度
挖矿即哈希
优点：随机公平性、单向不可逆
比特币是一种通缩货币。

#### POW 最长链机制
51%攻击

